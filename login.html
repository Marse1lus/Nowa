{% extends "base_generic.html" %}
{% load static %}

{% block content %}
  <link rel="stylesheet" href="{% static 'tournaments/registration.css' %}">

  <header class="header" role="banner">
    <div class="logo" role="heading" aria-level="1">
      <a href="{% url 'home' %}" class="logo-link">
        NO<span class="highlight-w">W</span>ACHAMPIONSHIP ü§º‚Äç‚ôÇÔ∏è
      </a>
    </div>
    <nav class="nav-menu" role="navigation" aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
      <a href="{% url 'tournament_list' %}" role="menuitem">–¢—É—Ä–Ω–∏—Ä—ã</a>
      <div class="dropdown">
        <a href="#" class="nav-link" role="button" aria-haspopup="true" aria-expanded="false" aria-controls="sections-menu">
          –°–µ–∫—Ü–∏–∏ ‚ñº
        </a>
        <div class="dropdown-content" id="sections-menu" role="menu" aria-label="–í—ã–±–æ—Ä —Å–µ–∫—Ü–∏–∏">
          <a href="#" role="menuitem">–ú–∞–º–µ—Ç–æ–≤–∞</a>
          <a href="#" role="menuitem">–ñ–∞–Ω—Å—É–≥—É—Ä–æ–≤–∞</a>
        </div>
      </div>
      <div class="dropdown">
        <a href="#" class="nav-link" role="button" aria-haspopup="true" aria-expanded="false" aria-controls="about-menu">
          –û –Ω–∞—Å ‚ñº
        </a>
        <div class="dropdown-content" id="about-menu" role="menu" aria-label="–û –Ω–∞—Å">
          <a href="https://teamnova.kz/p/d9b54a/" role="menuitem"> –û–¥–µ–∂–¥–∞</a>        
          <a href="#" role="menuitem">–ì–∞–ª–µ—Ä–µ—è</a>
          <a href="https://teamnova.kz/?fbclid=PAZXh0bgNhZW0CMTEAAabqvuAdlphCRMiUAHZdep2UTLlLhtCTS6DYdvksrVo9BqU0Xt3qHUsoojE_aem_M8j27ck8Z9D-t-2EcmU9aQ#contacts" role="menuitem" target="_blank">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </div>
      </div>
      <a href="{% url 'login' %}" class="signup">–í–æ–π—Ç–∏</a>
      <a href="{% url 'signup' %}" class="signup">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</a>
    </nav>
  </header>

  <main class="main">
    <h2>–í—Ö–æ–¥</h2>
    <form method="post" id="loginForm">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">–í–æ–π—Ç–∏</button>
    </form>
    <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="{% url 'signup' %}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
  </main>

  <script>
      document.getElementById('loginForm').addEventListener('submit', function(event) {
          const username = document.querySelector('input[name="username"]').value;
          const password = document.querySelector('input[name="password"]').value;

          if (!username || !password) {
              event.preventDefault();
              alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
          }
      });
  </script>
{% endblock %}

<script>
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.setAttribute('aria-expanded', 
                    this.getAttribute('aria-expanded') === 'false' ? 'true' : 'false');
            }
        });
    });
</script>